!function(s){"function"==typeof define&&define.amd?define(s):s()}(function(){"use strict";const s=require("request"),e="http://api.nytimes.com/svc/";class t{constructor(s,e,t){this.apiKey=s,this.query=e,this.filter=t}mostEmailed(s){this._sendRequest("mostpopular/v2/mostemailed/all-sections/7?",s)}mostViewed(s){this._sendRequest("mostpopular/v2/mostviewed/all-sections/7?",s)}mostShared(s){this._sendRequest("mostpopular/v2/mostshared/all-sections/7?",s)}topstories(s){const e=this.query?this.query:"home";this._sendRequest(`topstories/v2/${e}.json?`,s)}search(s){null===this.filter&&void 0===this.filter||this.filter,this._sendRequest(`search/v2/articlesearch.json?q=${this.query}&`,s)}archive(s){this._sendRequest(`archive/v1/${this.query}.json?`)}_sendRequest(t,i){const o=`${e}/${t}api-key=${process.env.API_KEY}`;s(o,function(s,e,t){!s&200===e.statusCode&&(JSON.parse(t).results?i(JSON.parse(t).results):JSON.parse(t).response&&i(JSON.parse(t).response))})}}new t("AlXgoIpRe2n0WiErV633AGifrdaBrHbH").topstories(function(s){console.log(s)}),module.exports=t});
